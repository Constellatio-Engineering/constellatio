(self.webpackChunkconstellatio=self.webpackChunkconstellatio||[]).push([[6801],{"./node_modules/@mantine/core/esm/FocusTrap/FocusTrap.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>FocusTrap});var react=__webpack_require__("./node_modules/react/index.js"),is_element=__webpack_require__("./node_modules/@mantine/utils/esm/is-element/is-element.js");const TABBABLE_NODES=/input|select|textarea|button|object/,FOCUS_SELECTOR="a, input, select, textarea, button, object, [tabindex]";function tabbable_hidden(element){return"none"===element.style.display}function getElementTabIndex(element){let tabIndex=element.getAttribute("tabindex");return null===tabIndex&&(tabIndex=void 0),parseInt(tabIndex,10)}function focusable(element){const nodeName=element.nodeName.toLowerCase(),isTabIndexNotNaN=!Number.isNaN(getElementTabIndex(element));return(TABBABLE_NODES.test(nodeName)&&!element.disabled||element instanceof HTMLAnchorElement&&element.href||isTabIndexNotNaN)&&function visible(element){if(element.getAttribute("aria-hidden")||element.getAttribute("hidden")||"hidden"===element.getAttribute("type"))return!1;let parentElement=element;for(;parentElement&&parentElement!==document.body&&11!==parentElement.nodeType;){if(tabbable_hidden(parentElement))return!1;parentElement=parentElement.parentNode}return!0}(element)}function tabbable(element){const tabIndex=getElementTabIndex(element);return(Number.isNaN(tabIndex)||tabIndex>=0)&&focusable(element)}function findTabbableDescendants(element){return Array.from(element.querySelectorAll(FOCUS_SELECTOR)).filter(tabbable)}var random_id=__webpack_require__("./node_modules/@mantine/hooks/esm/utils/random-id/random-id.js");function useFocusTrap(active=!0){const ref=(0,react.useRef)(),restoreAria=(0,react.useRef)(null),focusNode=node=>{let focusElement=node.querySelector("[data-autofocus]");if(!focusElement){const children=Array.from(node.querySelectorAll(FOCUS_SELECTOR));focusElement=children.find(tabbable)||children.find(focusable)||null,!focusElement&&focusable(node)&&(focusElement=node)}focusElement&&focusElement.focus({preventScroll:!0})},setRef=(0,react.useCallback)((node=>{active&&(null!==node?(restoreAria.current=function createAriaHider(containerNode,selector="body > :not(script)"){const id=(0,random_id.k)(),rootNodes=Array.from(document.querySelectorAll(selector)).map((node=>{var _a;if((null==(_a=null==node?void 0:node.shadowRoot)?void 0:_a.contains(containerNode))||node.contains(containerNode))return;const ariaHidden=node.getAttribute("aria-hidden"),prevAriaHidden=node.getAttribute("data-hidden"),prevFocusId=node.getAttribute("data-focus-id");return node.setAttribute("data-focus-id",id),null===ariaHidden||"false"===ariaHidden?node.setAttribute("aria-hidden","true"):prevAriaHidden||prevFocusId||node.setAttribute("data-hidden",ariaHidden),{node,ariaHidden:prevAriaHidden||null}}));return()=>{rootNodes.forEach((item=>{item&&id===item.node.getAttribute("data-focus-id")&&(null===item.ariaHidden?item.node.removeAttribute("aria-hidden"):item.node.setAttribute("aria-hidden",item.ariaHidden),item.node.removeAttribute("data-focus-id"),item.node.removeAttribute("data-hidden"))}))}}(node),ref.current!==node&&(node?(setTimeout((()=>{node.getRootNode()&&focusNode(node)})),ref.current=node):ref.current=null)):restoreAria.current&&(restoreAria.current(),restoreAria.current=null))}),[active]);return(0,react.useEffect)((()=>{if(!active)return;ref.current&&setTimeout((()=>focusNode(ref.current)));const handleKeyDown=event=>{"Tab"===event.key&&ref.current&&function scopeTab(node,event){const tabbable=findTabbableDescendants(node);if(!tabbable.length)return void event.preventDefault();const finalTabbable=tabbable[event.shiftKey?0:tabbable.length-1],root=node.getRootNode();if(finalTabbable!==root.activeElement&&node!==root.activeElement)return;event.preventDefault();const target=tabbable[event.shiftKey?tabbable.length-1:0];target&&target.focus()}(ref.current,event)};return document.addEventListener("keydown",handleKeyDown),()=>{document.removeEventListener("keydown",handleKeyDown),restoreAria.current&&restoreAria.current()}}),[active]),setRef}var use_merged_ref=__webpack_require__("./node_modules/@mantine/hooks/esm/use-merged-ref/use-merged-ref.js");function FocusTrap({children,active=!0,refProp="ref"}){const focusTrapRef=useFocusTrap(active),ref=(0,use_merged_ref.Y)(focusTrapRef,null==children?void 0:children.ref);return(0,is_element.k)(children)?(0,react.cloneElement)(children,{[refProp]:ref}):children}FocusTrap.displayName="@mantine/core/FocusTrap"},"./node_modules/@mantine/hooks/esm/use-focus-return/use-focus-return.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{u:()=>useFocusReturn});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_use_did_update_use_did_update_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@mantine/hooks/esm/use-did-update/use-did-update.js");function useFocusReturn({opened,shouldReturnFocus=!0}){const lastActiveElement=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(),returnFocus=()=>{var _a;lastActiveElement.current&&"focus"in lastActiveElement.current&&"function"==typeof lastActiveElement.current.focus&&(null==(_a=lastActiveElement.current)||_a.focus({preventScroll:!0}))};return(0,_use_did_update_use_did_update_js__WEBPACK_IMPORTED_MODULE_1__.l)((()=>{let timeout=-1;const clearFocusTimeout=event=>{"Tab"===event.key&&window.clearTimeout(timeout)};return document.addEventListener("keydown",clearFocusTimeout),opened?lastActiveElement.current=document.activeElement:shouldReturnFocus&&(timeout=window.setTimeout(returnFocus,10)),()=>{window.clearTimeout(timeout),document.removeEventListener("keydown",clearFocusTimeout)}}),[opened,shouldReturnFocus]),returnFocus}},"./node_modules/@mantine/hooks/esm/use-uncontrolled/use-uncontrolled.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{C:()=>useUncontrolled});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function useUncontrolled({value,defaultValue,finalValue,onChange=()=>{}}){const[uncontrolledValue,setUncontrolledValue]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(void 0!==defaultValue?defaultValue:finalValue);return void 0!==value?[value,onChange,!0]:[uncontrolledValue,val=>{setUncontrolledValue(val),null==onChange||onChange(val)},!1]}},"./node_modules/@mantine/utils/esm/create-safe-context/create-safe-context.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{R:()=>createSafeContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function createSafeContext(errorMessage){const Context=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(null);return[({children,value})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(Context.Provider,{value},children),()=>{const ctx=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(Context);if(null===ctx)throw new Error(errorMessage);return ctx}]}},"./src/components/molecules/UserDropdown/UserDropdown.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _Default$parameters,_Default$parameters2,C_Users_ahmed_Desktop_WORK_caisy_clients_constellatio_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_UserDropdown__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/molecules/UserDropdown/UserDropdown.tsx"),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,C_Users_ahmed_Desktop_WORK_caisy_clients_constellatio_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var meta={title:"Molecules/UserDropdown",component:_UserDropdown__WEBPACK_IMPORTED_MODULE_2__.w},Default={render:function render(){return __jsx(_UserDropdown__WEBPACK_IMPORTED_MODULE_2__.w,null)}};const __WEBPACK_DEFAULT_EXPORT__=meta;Default.parameters=_objectSpread(_objectSpread({},Default.parameters),{},{docs:_objectSpread(_objectSpread({},null===(_Default$parameters=Default.parameters)||void 0===_Default$parameters?void 0:_Default$parameters.docs),{},{source:_objectSpread({originalSource:"{\n  render: () => <UserDropdown />\n}"},null===(_Default$parameters2=Default.parameters)||void 0===_Default$parameters2||null===(_Default$parameters2=_Default$parameters2.docs)||void 0===_Default$parameters2?void 0:_Default$parameters2.source)})})},"./src/components/molecules/UserDropdown/UserDropdown.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{w:()=>UserDropdown});var C_Users_ahmed_Desktop_WORK_caisy_clients_constellatio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),C_Users_ahmed_Desktop_WORK_caisy_clients_constellatio_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),C_Users_ahmed_Desktop_WORK_caisy_clients_constellatio_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(C_Users_ahmed_Desktop_WORK_caisy_clients_constellatio_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1__),_mantine_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@mantine/core/esm/Menu/Menu.js"),_mantine_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@mantine/core/esm/Avatar/Avatar.js"),_tabler_icons_react__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@tabler/icons-react/dist/esm/icons/IconBrandStripe.js"),_tabler_icons_react__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@tabler/icons-react/dist/esm/icons/IconLogout.js"),_supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@supabase/auth-helpers-nextjs/dist/index.js"),_mantine_notifications__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mantine/notifications/esm/events.js"),next_router__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/next/router.js"),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement;function UserDropdown(){var supabase=(0,_supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_2__.createPagesBrowserClient)(),router=(0,next_router__WEBPACK_IMPORTED_MODULE_3__.useRouter)(),handleSubscription=function(){var _ref=(0,C_Users_ahmed_Desktop_WORK_caisy_clients_constellatio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_4__.Z)(C_Users_ahmed_Desktop_WORK_caisy_clients_constellatio_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().mark((function _callee(){return C_Users_ahmed_Desktop_WORK_caisy_clients_constellatio_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,router.push("/settings/billing");case 2:case"end":return _context.stop()}}),_callee)})));return function handleSubscription(){return _ref.apply(this,arguments)}}(),handleSignOut=function(){var _ref2=(0,C_Users_ahmed_Desktop_WORK_caisy_clients_constellatio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_4__.Z)(C_Users_ahmed_Desktop_WORK_caisy_clients_constellatio_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().mark((function _callee2(){return C_Users_ahmed_Desktop_WORK_caisy_clients_constellatio_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=3,supabase.auth.signOut();case 3:return _context2.next=5,router.replace("/login");case 5:_mantine_notifications__WEBPACK_IMPORTED_MODULE_5__.N9.show({title:"Sign out handler",message:"Come back soon!"}),_context2.next=10;break;case 8:_context2.prev=8,_context2.t0=_context2.catch(0);case 10:case"end":return _context2.stop()}}),_callee2,null,[[0,8]])})));return function handleSignOut(){return _ref2.apply(this,arguments)}}();return __jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_6__.v,{width:200,position:"bottom-end",transitionProps:{transition:"pop-top-right"}},__jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_6__.v.Target,null,__jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_7__.q,{radius:"xl"})),__jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_6__.v.Dropdown,null,__jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_6__.v.Item,{onClick:handleSubscription,icon:__jsx(_tabler_icons_react__WEBPACK_IMPORTED_MODULE_8__.Z,{size:"0.9rem",stroke:1.5})},"Abonnement"),__jsx(_mantine_core__WEBPACK_IMPORTED_MODULE_6__.v.Item,{onClick:handleSignOut,icon:__jsx(_tabler_icons_react__WEBPACK_IMPORTED_MODULE_9__.Z,{size:"0.9rem",stroke:1.5})},"Abmelden")))}UserDropdown.displayName="UserDropdown",UserDropdown.__docgenInfo={description:"",methods:[],displayName:"UserDropdown"}},"?c969":()=>{},"?3e83":()=>{},"?19e6":()=>{}}]);